<krpano>

    <!--核心参数，不做改动-->
    <action name="draglayer_text">
		if(%1 != dragging,
			copy(drag_currenty, y);
			copy(drag_stagey, mouse.stagey);
			draglayer_text(dragging,%2);
		  ,
			if(pressed,
				sub(dy, mouse.stagey, drag_stagey);
				add(y1, drag_currenty, dy);
				add(y2, y1, pixelheight);
				sub(y2, %2);
				if(y1 GT 0, set(y1,0));
				if(y2 LT 0, sub(y1,y2));
				copy(y,y1);
				delayedcall(0, draglayer_text(dragging,%2) );
			  );
		  );
	</action>

    <action name="picture_resize">

	div(aspect, layer[%1].imagewidth, layer[%1].imageheight);
	mul(new_width, layer[get(layer[%1].parent)].width, 0.9);<!-- 显示图片比例 -->
	div(new_height, new_width, aspect);
	mul(max_height, layer[get(layer[%1].parent)].height, 0.9);<!-- 显示图片比例 -->
	if(new_height GT max_height,
		copy(new_height, max_height);
		mul(new_width, new_height, aspect);
	  );
	roundval(new_width);
	roundval(new_height);
	copy(layer[%1].width, new_width);
	copy(layer[%1].height, new_height);
   </action>

   <action name="picture_resize_stage">	
	div(aspect, layer[%1].imagewidth, layer[%1].imageheight);
	mul(new_width, stagewidth, 0.8); <!-- 放大图片比例 -->
	div(new_height, new_width, aspect);
	mul(max_height, stageheight, 0.8);<!-- 放大图片比例 -->
	if(new_height GT max_height,
		copy(new_height, max_height);
		mul(new_width, new_height, aspect);
	  );
	roundval(new_width);
	roundval(new_height);
	copy(layer[%1].width, new_width);
	copy(layer[%1].height, new_height);
    </action>
    <!--核心参数，不做改动-->

        <!-- 开始 -->

	    <!--弹出框属性-->
        <layer name="textbox_1"  type="container" visible="false" align="center" x="0" y.normal="-5%" y.mobile="5%" width="600" height="400" scale.normal="1" scale.mobile="0.5" bgroundedge="3" bgcolor="0x333333" bgalpha="0.8" bgcapture="true" bgborder="3 0xFFFFFF 1" scalechildren="true" children="true" >
		
        <!--弹出框标题属性-->
		<layer name="title_1" url="%SWFPATH%/plugins/textfield.swf" children="false" enabled="false" align="top" y="5%" width="100%" autoheight="true"
		           border="false" background="false" 
			       css="text-align:center; color:#FFFFFF; font-family:Arial; font-weight:bold; font-size:18px;"
			       html="24小时自助图书馆"
			       /><!--html——标题文字，css——文字大小/颜色属性-->

        <!--关闭按钮属性-->        
        <layer name="button_close_mask_1"  type="container" align="righttop" edge="center"  y="5" x="5" width="30" height="30" bgroundedge="30" bgcolor="0x000000" bgalpha="1" bgcapture="true" bgborder="3 0xFFFFFF 1"  >

        	<layer name="button_close_1" url="%SWFPATH%/skin/close.png" children="false" enabled="true" align="center"   width="22" height="22" onclick="set(layer[textbox_1].visible,false);" 
			       />

		</layer>	       
       
			<layer name="textmask_1" type="container" align="center" x="0" y="0" width.normal="220" width.mobile="500" height.normal="250" height.mobile="300" bgcolor="0xFFFFFF" bgalpha="0" maskchildren="true">
			<layer name="text_9" url="%SWFPATH%/plugins/textfield.swf" children="false" align="center" x="0" y="0" width="100%" autoheight="true"
			       border="false" background="false"
			       css="text-align:left; color:#FFFFFF; font-family:Arial; font-size:15px;"
			       html="data:testtext_1"
			       
			       />
		</layer>

		</layer>
	
	<data name="testtext_1">
       　　“24小时自助图书馆”让您不再受图书馆开馆、闭馆时间限制，只需要一张图书馆读者证，就能够全时段进入图书馆进行图书阅览和自助借还。
	</data>
	<!-- 结束 -->
	
	
	
	<!--移动端设置-->
	<krpano devices="mobile">

    <layer name="textbox_1" >    	    
        <!--关闭按钮加大-->
    	<layer name="button_close_mask_1" width="50" height="50" >
		<layer name="button_close_1"  width="45" height="45" />
		</layer>
		<!--文字缩小-->
		<layer name="textmask_1" y="-5%" >
			<layer name="text_1" 
			       css="text-align:left; color:#FFFFFF; font-family:Arial; font-size:10px;"
			        
			       />
		</layer>
		</layer>

	
	</krpano>
	<!-- 移动端设置 -->

</krpano>